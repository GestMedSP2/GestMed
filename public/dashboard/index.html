<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/img/logosemtexto.svg" type="image/x-icon">
    <title>GestMed | Dashboard</title>
    <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/simulador.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/validarSessao.js" defer></script>
    <script src="../js/charts.js" defer></script>
    <script src="../js/dashboard.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="shortcut icon" href="../assets/img/logosemtexto.svg" type="image/x-icon">
</head>
<body onload="validarSessao(); chamarDados()">
    <button class="criarSensor" onclick="abrirModal()">
        <span class="iconify" data-icon="mingcute:add-fill"></span>
    </button>

    <div class="modalCriarSensor modalCriarSensorInativo" id="modalCriarSensor">
        <div class="overlay">
          <div class="modal">
            <div class="modalContainer">
              <h2>Cadastro de sensores</h2>
              <input type="text" placeholder="Identificação do sensor" id="idSensor">
              <div>
                <button id="buttonCadastrar" class="botaoVerde" onclick="criarSensor()">Cadastrar</button>
                <button id="buttonCancelar" class="botaoVermelho" onclick="fecharModal()">Cancelar</button>
              </div>
            </div>
          </div>
        </div>
    </div>

    <div class="menu">
        <img src="../assets/img/logosemtexto.svg" alt="logo">
        <nav class="opcoes">
            <ul> 
                <li>
                   <a href="../setores/index.html"> <span class="iconify" data-icon="ci:chart-bar-vertical-01" data-width="30"></span>
                    <h4>Setores</h4>
                  </a>
                </li>
                <li>
                    <a href="../alertas/index.html"><span class="iconify" data-icon="ci:bell-ring" data-width="30"></span>
                    <h4>Alertas</h4>
                  </a>
                </li>
                <li>
                   <a href="../funcionarios/index.html">
                      <span class="iconify" data-icon="ci:user" data-width="30"></span>
                      <h4>Funcionários</h4>
                    </a> 
                </li>
                <li>
                    <a href="https://app.pipefy.com/public/form/oE11CDTa">
                       <span class="iconify" data-icon="bx:support" data-width="30"></span>
                       <h4>Suporte</h4>
                     </a> 
                 </li>
            </ul>
        </nav>
    </div>

    <div class="conteudo">
        <div class="headerDashboard">

            <h2 id="nome_empresa"> Pfizer</h2>
            <div class="setor">
                <h1>Setor <span id="nomeSetor"></span> </h1>
            </div>
            <details class="perfil">
              <summary>
                <h4>Olá, <span id="nome_usuario">funcionário</span></h4>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 10l5 5m0 0l5-5"/></svg>
                </summary>
                <div id="conteudoPerfil">
                  <a onclick="sair()">
                  <h4>Sair</h4> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="#ff4040" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12h-9.5m7.5 3l3-3l-3-3m-5-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1"/></svg>
                  </a>
                </div>
            </details>
      
          </div>

        <div class="dashboard">
            <div class="graficosSuperiores">
            <!--Gráfico de Temperatura-->
                <div class="conteudoGrafico">
                    <div class="conteudoEsquerda">
                        <div class="quadradoSetorSuporta">
                            <h3>Temperatura ideal do setor:</h3>
                            <div class="minimoMaximo">
                                
                                <div class="colunaQuadradinho">
                                    <h4>Mínimo:</h4>
                                    <div class="quadradinhoMinimo">
                                        <h1 id="temperaturaMinima">3°C</h1>
                                    </div>
                                </div>

                                <div class="colunaQuadradinho">
                                    <h4>Máximo:</h4>
                                    <div class="quadradinhoMaximo">
                                        <h1 id="temperaturaMaxima">7°C</h1>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>

                        <div id="alertaTemperatura" class="alerta">
                            <h2>ALERTA DE TEMPERATURA</h2>
                            <p>A temperatura ideal do setor foi utrapassada exatamente ás 13:08, passando de 6°C para 10°C.</p>
                        </div>

                    </div>


                    <div class="grafico">
                        <h2 class="corVerde">Gráfico de Temperatura</h2>
                        <div class="areaGrafico">
                            <div id="graficoLinha">
                                <canvas id="chartTemperatura"></canvas>
                            </div>
                        </div>
                    </div>
                    

                </div>


                <!--Gráfico de Umidade-->
                <div class="conteudoGrafico">
                    <div class="conteudoEsquerda">
                        <div class="quadradoSetorSuporta">
                            <h3>Umidade ideal do setor:</h3>
                            <div class="minimoMaximo">
                                
                                <div class="colunaQuadradinho">
                                    <h4>Mínimo:</h4>
                                    <div class="quadradinhoMinimo">
                                        <h1>40%</h1>
                                    </div>
                                </div>

                                <div class="colunaQuadradinho">
                                    <h4>Máximo:</h4>
                                    <div class="quadradinhoMaximo">
                                        <h1>70%</h1>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>

                        <div id="alertaUmidade" class="alertaIdeal">
                            <h2>UMIDADE IDEAL</h2>
                            <p>Esse setor apresenta a umidade ideal.</p>
                        </div>

                    </div>

                    <div class="grafico">
                        <h2 class="corAzul">Gráfico de Umidade</h2>
                        <div class="areaGrafico">
                            <div id="graficoLinha">
                                <canvas id="chartUmidade"></canvas>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <div class="indicadoresInferiores">
                <!--Gráfico de Barra-->
                <div id="conteudoGraficoBarra">
                    <div class="conteudoEsquerda">
                        <div class="periodoEscolha">
                            <label><b>Dados coletados no período:</b></label>
                            <select name="selectPeriodo" id="select_periodo">
                                <option value="Semana" selected>Última semana</option>
                                <option value="Dia">Últimas 12 horas</option>
                            </select>
                        </div>
                        
                        <div class="quadradoSetorSuporta tamanhoMenor">
                            <h3>Temperatura mais alta obtida:</h3>
                            <div class="alinhaGraficoBarra">
                                <img class="imgTemperaturaUmidade" src="../assets/img/termometro.png">
                                <div class="maiorMenorDadoObtido">
                                    <h2 id="temperaturaMaisAltaObtida">-°C</h2>
                                </div>
                            </div>

                        </div>

                        <div class="quadradoSetorSuporta tamanhoMenor">
                            <h3>Umidade mais alta obtida:</h3>
                            <div class="alinhaGraficoBarra">
                                <img class="imgTemperaturaUmidade" src="../assets/img/umidade.png">
                                <div class="maiorMenorDadoObtido">
                                    <h2 id="umidadeMaisAltaObtida">-%</h2>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="grafico">
                        <h2 class="corVerde">Gráfico da Média de Temperatura e Umidade</h2>
                        <div class="areaGrafico">
                            <div id="graficoBarra">
                                <canvas id="myBarChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Temperatura e umidade atuais-->
                <div id="conteudoAtual">

                    <div class="quadradoSetorSuporta alinhamentoAtual">
                        <div class="listraEsquerda"></div>
                        <div class="conteudoDireita">
                            <h3>Temperatura Atual:</h3>
                            <img class="imgTemperaturaUmidade tamanhoAtual" src="../assets/img/termometro.png">
                        </div>

                        <div class="conteudoDireitaTemperaturaUmidade">
                            <div class="maiorMenorDadoObtido maiorTamanho">
                                <h2 class="temperaturaUmidadeAtual" id="temperaturaAtual">-°C</h2>
                            </div>
                        </div>

                    </div>


                    <div class="quadradoSetorSuporta alinhamentoAtual">
                        <div class="listraEsquerda"></div>
                        <div class="conteudoDireita">
                            <h3>Umidade Atual:</h3>
                            <img class="imgTemperaturaUmidade tamanhoAtual" src="../assets/img/umidade.png">
                        </div>

                        <div class="conteudoDireitaTemperaturaUmidade">
                            <div class="maiorMenorDadoObtido maiorTamanho">
                                <h2 class="temperaturaUmidadeAtual" id="umidadeAtual">-%</h2>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>    

    </div>
</body>
</html>
